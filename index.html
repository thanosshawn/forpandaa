<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SaRa & KeshavA Heart</title>
  <style>
    html, body {
      margin: 0;
      background: radial-gradient(circle at center, #f7fcc3, #eaf5d0);
      overflow: hidden;
      height: 100%;
      font-family: 'Courier New', Courier, monospace;
      touch-action: manipulation;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="heartCanvas"></canvas>

<script>
  const canvas = document.getElementById('heartCanvas');
  const ctx = canvas.getContext('2d');

  let width, height, heartParticles = [], floatingParticles = [], pandaEmojis = [], rotatingSara = [];
  const heartText = 'SaRa';
  const centerText = 'KeshavA';
  const clickText = 'SaRa';
  let isDragging = false;

  function resizeCanvas() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
  }

  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  class HeartParticle {
    constructor(angleOffset) {
      this.angleOffset = angleOffset;
      this.offset = Math.random() * 1000;
    }

    draw(time) {
      const t = (time / 3000 + this.angleOffset) % (2 * Math.PI); // slower animation
      const x = 16 * Math.pow(Math.sin(t), 3);
      const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
      const pulse = 1 + 0.2 * Math.sin(time / 1500 + this.offset); // slower pulse
      ctx.save();
      ctx.translate(width / 2 + x * width * 0.025, height / 2 + y * width * 0.025);
      ctx.scale(pulse, pulse);
      ctx.fillStyle = `rgba(255, 105, 135, 0.9)`;
      ctx.shadowColor = '#ff80aa';
      ctx.shadowBlur = 12;
      ctx.font = `${Math.max(10, width * 0.015)}px Courier New`;
      ctx.fillText(heartText, -ctx.measureText(heartText).width / 2, 5);
      ctx.restore();
    }
  }

  class FloatingParticle {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.opacity = 1;
      this.dy = -Math.random() * 1.5 - 0.5;
      this.dx = (Math.random() - 0.5) * 1.5;
      this.size = 14;
      this.life = 0;
    }

    update() {
      this.x += this.dx;
      this.y += this.dy;
      this.opacity -= 0.01;
      this.life += 1;
    }

    draw() {
      if (this.opacity <= 0) return;
      ctx.save();
      ctx.globalAlpha = Math.max(0, this.opacity);
      ctx.font = `${Math.max(12, width * 0.02)}px Courier New`;
      ctx.fillStyle = '#ff80aa';
      ctx.shadowColor = '#ff99bb';
      ctx.shadowBlur = 10;
      ctx.fillText(clickText, this.x, this.y);
      ctx.restore();
    }

    isAlive() {
      return this.opacity > 0;
    }
  }

  class PandaEmoji {
    constructor() {
      this.reset();
    }

    reset() {
      this.x = Math.random() * width;
      this.y = height + Math.random() * 200;
      this.speed = Math.random() * 0.5 + 0.3;
      this.emoji = 'üêº';
      this.size = Math.random() * 20 + 20;
    }

    update() {
      this.y -= this.speed;
      if (this.y < -50) this.reset();
    }

    draw() {
      ctx.font = `${this.size}px serif`;
      ctx.fillText(this.emoji, this.x, this.y);
    }
  }

  function createHeartParticles() {
    heartParticles = [];
    for (let i = 0; i < 100; i++) {
      heartParticles.push(new HeartParticle(i * 2 * Math.PI / 100));
    }
  }

  for (let i = 0; i < 25; i++) {
    pandaEmojis.push(new PandaEmoji());
  }

  canvas.addEventListener('click', (e) => {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    for (let i = 0; i < 10; i++) {
      floatingParticles.push(new FloatingParticle(x, y));
    }
  });

  canvas.addEventListener('mousedown', () => isDragging = true);
  canvas.addEventListener('mouseup', () => isDragging = false);
  canvas.addEventListener('mouseleave', () => isDragging = false);
  canvas.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    floatingParticles.push(new FloatingParticle(x, y));
  });

  createHeartParticles();

  function animate(time) {
    ctx.clearRect(0, 0, width, height);

    for (let panda of pandaEmojis) {
      panda.update();
      panda.draw();
    }

    for (let p of heartParticles) {
      p.draw(time);
    }

    ctx.save();
    ctx.font = `${Math.max(20, width * 0.03)}px Courier New`;
    ctx.fillStyle = '#ff80aa';
    ctx.shadowColor = '#ff99bb';
    ctx.shadowBlur = 15;
    ctx.textAlign = 'center';
    ctx.fillText(centerText, width / 2, height / 2);
    ctx.restore();

    floatingParticles = floatingParticles.filter(p => p.isAlive());
    for (let p of floatingParticles) {
      p.update();
      p.draw();
    }

    requestAnimationFrame(animate);
  }

  animate(0);
</script>
</body>
</html>
